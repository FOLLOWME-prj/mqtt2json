version: "3.8"

services:
  mqtt2json:
    build: .
    container_name: mqtt2json
    restart: unless-stopped
    working_dir: /app
    environment:
      # Override broker/port if needed
      MQTT_BROKER: chirpstackdocker-mosquitto-1   # name of your existing Mosquitto container
      MQTT_PORT: "1883"
      # Optionally, if auth is needed:
      # MQTT_USERNAME: ""
      # MQTT_PASSWORD: ""
    volumes:
      # Map the Data directory so CSV files are visible on the host
      - ./Data:/app/Data
    networks:
      - chirpstack_net

networks:
  chirpstack_net:
    external: true
    name: chirpstackdocker_default
